# Docker RISC-V64 Gentoo Overlay (Modular)

Pre-built Docker binaries for RISC-V64 architecture, packaged for Gentoo Linux using a modular approach.

## Architecture

This overlay follows Gentoo's standard packaging philosophy by providing separate packages for each Docker component:

- **app-containers/containerd** - Container runtime
- **app-containers/runc** - OCI runtime
- **app-containers/docker-cli** - Docker command-line interface
- **app-containers/docker-compose** - Docker Compose v2 plugin
- **app-containers/docker** - Docker Engine daemon (depends on above packages)
- **sys-process/tini** - Tiny init process for containers

## Installation

See the main project README for installation instructions:
https://github.com/gounthar/docker-for-riscv64#gentoo-installation

## Quick Start

```bash
# Add the overlay
eselect repository add docker-riscv64 git https://github.com/gounthar/docker-for-riscv64.git

# Sync the overlay
emerge --sync docker-riscv64

# Install Docker (will pull in all dependencies)
emerge -av app-containers/docker

# Optional: Install Docker Compose
emerge -av app-containers/docker-compose
```

## Package Management

Individual components can be updated independently:

```bash
# Update only containerd
emerge -av =app-containers/containerd-1.7.28

# Update only Docker CLI
emerge -av =app-containers/docker-cli-28.5.1

# Update Docker Engine (will check dependencies)
emerge -av =app-containers/docker-28.5.1
```

## Generation

This overlay is generated by `generate-gentoo-overlay-modular.sh` which:
1. Generates separate ebuilds for each component
2. Creates proper dependency relationships
3. Maintains compatibility with Gentoo's package structure

To regenerate:
```bash
./generate-gentoo-overlay-modular.sh \
  --docker-version 28.5.1 \
  --cli-version 28.5.1 \
  --compose-version 2.40.1 \
  --containerd-version 1.7.28 \
  --runc-version 1.3.0 \
  --tini-version 0.19.0
```

## Source

- Upstream Gentoo ebuilds: `upstream-gentoo-ebuilds/`
- Generation script: `generate-gentoo-overlay-modular.sh`
- Individual generators: `scripts/generate-*-ebuild.sh`
- Pre-built binaries: https://github.com/gounthar/docker-for-riscv64/releases

## Migration from Monolithic Package

If you previously used the monolithic docker package:

```bash
# Uninstall old monolithic package
emerge -C =app-containers/docker-28.5.1-r1

# Install new modular packages
emerge -av app-containers/docker
```

The new Docker package will automatically pull in all required component packages.
